---
title: 20260130-数智公司
date: 2026-01-30 14:00:00
categories:
  - 工作记录
tags:
  - MySQL
  - Vue3
  - 学习笔记
description: 2026年1月30日工作记录 - MySQL优化与Vue3学习
---

# 20260130-数智公司

## 今日计划

- 学习MySQL的优化
- 学习Vue3语法
- 尝试Claude Code plugin

## 今日工作

### 学习MySQL优化

#### 使用索引提高MySQL查询性能

- 可以有效提高中到大型表的查询速度
- 但是小表建议直接全表扫描

#### 用IN替换OR

- 低效查询：`SELECT * FROM t WHERE id = 10 OR id = 20 OR id = 30;`
- 高效查询：`SELECT * FROM t WHERE id IN (10,20,30);`

另外，MySQL对于IN做了相应的优化，即即将IN中的常量全部存储在一个数组里面，而且这个数组是排好序的。但是如果数值较多，产生的消耗也比较大。

再例如：`select id from table_name where num in(1,2,3)`

- 对于连续的数值，能用between就不要用in了
- 再或者使用连接来替换

#### 将多次插入换成批量Insert插入

#### 区分IN和EXISTS

```sql
select * from 表A where id in (select id from 表B)
```

上面的语句相当于:

```sql
select * from 表A where exists(select * from 表B where 表B.id=表A.id)
```

**区分IN和EXISTS主要是造成了驱动顺序的改变**（这是性能变化的关键）：

- 如果是EXISTS，那么以外层表为驱动表，先被访问
- 如果是IN，那么先执行子查询

**使用场景：**
- IN适合于**外表大而内表小**的情况
- EXISTS适合于**外表小而内表大**的情况

**注意：** IN查询在某些情况下有可能会查询返回错误的结果，因此通常是建议在确定且有限的集合时可以使用IN，如 `IN (0,1,2)`。

#### 设计数据库时满足三大范式与BCNF

**1NF（第一范式）：**
- 最基本的要求，是指数据库表的每一列（即每个属性）都是不可分割的基本数据项
- 同一列中不能有多个值，即实体中的某个属性不能有多个值或者不能有重复的属性
- 简而言之，第一范式就是无重复的列，列中不含有多个值，每个属性不可再分

**2NF（第二范式）：**
- 消除了非主属性对于码的部分函数依赖（码中的部分主属性能决定某个非主属性）
- 若主属性只有一个则肯定满足
- 实体属性要完全依赖主键，不能依赖部分主键

**3NF（第三范式）：**
- 消除了非主属性对于码的传递函数依赖（某个非主属性可以决定另一个非主属性）
- 若非主属性只有一个则肯定满足
- 一个表中不能包含其它表中已包含的非主关键字信息
- 不严谨地说就是这个表只包含其他表的ID

**BCNF（巴斯范式）：**
- 消除主属性对于码的部分与传递函数依赖（至少两个主属性）
- 一般是因为存在多个码，多个主属性，一个主属性可以决定另外一个主属性（另外的主属性又可以反过来决定原来的主属性）

### 学习Vue3
